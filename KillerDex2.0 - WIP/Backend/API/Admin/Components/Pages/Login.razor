@page "/admin/login"
@layout LoginLayout
@inject IStringLocalizer<SharedResource> L

<PageTitle>@L["Login_PageTitle"]</PageTitle>

<div class="login-container">
    <MudPaper Elevation="4" Class="pa-8 login-card">
        <MudStack Spacing="4">
            <div style="text-align: center;">
                <MudText Typo="Typo.h4" Color="Color.Primary" Style="font-weight: 600; letter-spacing: 1px;">KILLERDEX</MudText>
                <MudText Typo="Typo.subtitle2" Class="mud-text-secondary" Style="margin-top: -4px;">@L["Login_AdminPanel"]</MudText>
            </div>

            <form method="post" action="/admin/auth/login" class="mt-4" autocomplete="off">
                <input type="hidden" name="returnUrl" value="@ReturnUrl" />

                <div class="mb-4">
                    <label class="mud-input-label" style="color: var(--mud-palette-text-secondary); font-size: 0.75rem; margin-bottom: 4px; display: block;">@L["Login_Username"]</label>
                    <input type="text"
                           name="username"
                           required
                           autocomplete="off"
                           style="width: 100%; padding: 12px 14px; background: var(--mud-palette-surface); border: 1px solid var(--mud-palette-lines-default); border-radius: 4px; color: var(--mud-palette-text-primary); font-size: 1rem; outline: none;"
                           onfocus="this.style.borderColor='var(--mud-palette-primary)'"
                           onblur="this.style.borderColor='var(--mud-palette-lines-default)'" />
                </div>

                <div class="mb-4">
                    <label class="mud-input-label" style="color: var(--mud-palette-text-secondary); font-size: 0.75rem; margin-bottom: 4px; display: block;">@L["Login_Password"]</label>
                    <input type="password"
                           name="password"
                           required
                           autocomplete="off"
                           style="width: 100%; padding: 12px 14px; background: var(--mud-palette-surface); border: 1px solid var(--mud-palette-lines-default); border-radius: 4px; color: var(--mud-palette-text-primary); font-size: 1rem; outline: none;"
                           onfocus="this.style.borderColor='var(--mud-palette-primary)'"
                           onblur="this.style.borderColor='var(--mud-palette-lines-default)'" />
                </div>

                @if (HasError)
                {
                    <MudAlert Severity="Severity.Error" Class="mb-4">@L["Login_InvalidCredentials"]</MudAlert>
                }

                <MudButton ButtonType="ButtonType.Submit"
                           Variant="Variant.Filled"
                           Color="Color.Primary"
                           Size="Size.Large"
                           Class="btn-responsive-width d-block mx-auto">
                    @L["Login_SignIn"]
                </MudButton>
            </form>

            <div style="text-align: center; margin-top: 16px;">
                <MudLink Href="/docs" Target="_blank" Typo="Typo.body2" Color="Color.Primary">
                    API Documentation
                </MudLink>
            </div>
        </MudStack>
    </MudPaper>
</div>

<style>
    .login-container {
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        padding: 20px;
        box-sizing: border-box;
    }
    .login-card {
        width: 100%;
        max-width: 400px;
    }
    .btn-responsive-width {
        width: 100% !important;
    }
    @@media (min-width: 600px) {
        .btn-responsive-width {
            width: 75% !important;
        }
    }
</style>

@code {
    [SupplyParameterFromQuery]
    public string? ReturnUrl { get; set; }

    [SupplyParameterFromQuery(Name = "error")]
    public string? Error { get; set; }

    private bool HasError => !string.IsNullOrEmpty(Error);
}
