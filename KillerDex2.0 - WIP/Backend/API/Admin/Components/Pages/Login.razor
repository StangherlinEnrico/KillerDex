@page "/admin/login"
@layout LoginLayout

<PageTitle>Login - KillerDex Admin</PageTitle>

<div class="login-container">
    <MudPaper Elevation="4" Class="pa-8 login-card">
        <MudStack Spacing="4">
            <MudText Typo="Typo.h4" Align="Align.Center" Color="Color.Primary">KillerDex Admin</MudText>
            <MudText Typo="Typo.body2" Align="Align.Center" Class="mud-text-secondary">Sign in to manage game data</MudText>

            <form method="post" action="/admin/auth/login" class="mt-4">
                <input type="hidden" name="returnUrl" value="@ReturnUrl" />

                <div class="mb-4">
                    <label class="mud-input-label" style="color: var(--mud-palette-text-secondary); font-size: 0.75rem; margin-bottom: 4px; display: block;">Username</label>
                    <input type="text"
                           name="username"
                           required
                           autocomplete="username"
                           style="width: 100%; padding: 12px 14px; background: var(--mud-palette-surface); border: 1px solid var(--mud-palette-lines-default); border-radius: 4px; color: var(--mud-palette-text-primary); font-size: 1rem; outline: none;"
                           onfocus="this.style.borderColor='var(--mud-palette-primary)'"
                           onblur="this.style.borderColor='var(--mud-palette-lines-default)'" />
                </div>

                <div class="mb-4">
                    <label class="mud-input-label" style="color: var(--mud-palette-text-secondary); font-size: 0.75rem; margin-bottom: 4px; display: block;">Password</label>
                    <input type="password"
                           name="password"
                           required
                           autocomplete="current-password"
                           style="width: 100%; padding: 12px 14px; background: var(--mud-palette-surface); border: 1px solid var(--mud-palette-lines-default); border-radius: 4px; color: var(--mud-palette-text-primary); font-size: 1rem; outline: none;"
                           onfocus="this.style.borderColor='var(--mud-palette-primary)'"
                           onblur="this.style.borderColor='var(--mud-palette-lines-default)'" />
                </div>

                @if (HasError)
                {
                    <MudAlert Severity="Severity.Error" Class="mb-4">Invalid username or password</MudAlert>
                }

                <MudButton ButtonType="ButtonType.Submit"
                           Variant="Variant.Filled"
                           Color="Color.Primary"
                           Size="Size.Large"
                           FullWidth="true">
                    Sign In
                </MudButton>
            </form>
        </MudStack>
    </MudPaper>
</div>

<style>
    .login-container {
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        padding: 20px;
        box-sizing: border-box;
    }
    .login-card {
        width: 100%;
        max-width: 400px;
    }
</style>

@code {
    [SupplyParameterFromQuery]
    public string? ReturnUrl { get; set; }

    [SupplyParameterFromQuery(Name = "error")]
    public string? Error { get; set; }

    private bool HasError => !string.IsNullOrEmpty(Error);
}
